webpackJsonp([13],{EefF:function(e,t){},aedn:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Xxa5"),n=o.n(r),a=o("exGp"),i=o.n(a),l=o("CCn6"),s=o("oFuF"),c={name:"addedition",data:function(){return{uploadData:{token:""},form:{version:"",type:"2",downloadUrl:"",isForce:!1,description:""},qiniuirl:"",uploadToken:{key:"",token:""},rules:{version:[{required:!0,message:"请输入版本号",trigger:"blur"}],downloadUrl:[{required:!0,message:"请输入下载地址",trigger:"blur"}]}}},mounted:function(){this.$route.params.id},created:function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.n)();case 2:0==(t=e.sent).code&&(this.uploadToken.token=t.data.token,this.qiniuirl=t.data.urlPrefix,console.log(111,t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{agaminInput:function(){this.form={version:"",type:"2",downloadUrl:"",isForce:!1,description:""}},handleSuccess:function(e,t){console.log(this.qiniuirl+e.key)},handleRemove:function(e,t){},beforeUpload:function(e){console.log(e);e.type,e.type,e.type,e.size;this.uploadToken.key="upload_apk_"+e.name+"?"+Date.parse(new Date)},onSubmit:function(){var e,t=this;this.$refs.form.validate((e=i()(n.a.mark(function e(o){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=7;break}return e.next=3,Object(l.r)(t.form);case 3:0==e.sent.code&&t.$message({message:"添加成功",type:"success"}),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)})),console.log("submit!"),console.log(this.form)},obtainUserDetail:function(){var e=i()(n.a.mark(function e(t){var o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,userDetailApi(t);case 2:0==(o=e.sent).code&&(o.data.createdTime=s.formatDate(o.data.createdTime,!0),this.userinfo=o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{"label-width":"120px",rules:e.rules,model:e.form}},[o("el-form-item",{attrs:{label:"选择系统",prop:"type"}},[o("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[o("el-option",{attrs:{label:"苹果手机",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"安卓手机",value:"1"}})],1)],1),e._v(" "),"1"===e.form.type?o("el-form-item",{attrs:{label:"上传apk"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"http://upload.qiniup.com","on-remove":e.handleRemove,"on-success":e.handleSuccess,accept:".apk",data:e.uploadToken,"before-upload":e.beforeUpload}},[o("el-button",{attrs:{type:"primary",plain:""}},[e._v("点击上传")]),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"版本号",prop:"version"}},[o("el-input",{model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"app下载地址",prop:"downloadUrl"}},[o("el-input",{model:{value:e.form.downloadUrl,callback:function(t){e.$set(e.form,"downloadUrl",t)},expression:"form.downloadUrl"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"更新方式",prop:"isForce"}},[o("el-radio-group",{model:{value:e.form.isForce,callback:function(t){e.$set(e.form,"isForce",t)},expression:"form.isForce"}},[o("el-radio",{attrs:{label:!1}},[e._v("推荐更新")]),e._v(" "),o("el-radio",{attrs:{label:!0}},[e._v("强制更新")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"版本描述",prop:"description"}},[o("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),o("el-button",{on:{click:e.agaminInput}},[e._v("取消")])],1)},staticRenderFns:[]};var p=o("VU/8")(c,u,!1,function(e){o("EefF")},null,null);t.default=p.exports}});