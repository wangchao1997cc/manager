webpackJsonp([9],{"4vfL":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("Xxa5"),o=t.n(a),n=t("exGp"),s=t.n(n),i=t("CCn6"),l=t("oFuF"),u={name:"addedition",data:function(){return{rolelist:[],form:{userName:"",loginName:"",password:"",roleIds:[],remark:""},userId:"",qiniuirl:"",uploadToken:{key:"",token:""},rules:{userName:[{required:!0,message:"请输入昵称",trigger:"blur"}],loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入账号密码",trigger:"blur"}],roleIds:[{required:!0,message:"请选择账号权限",trigger:"blur"}]}}},mounted:function(){var e=this.$route.params.id;"add"!=e&&(this.systemUserDeatil(e),this.userId=e)},created:function(){var e=s()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.z)();case 2:0==(r=e.sent).code&&(this.rolelist=r.data),console.log(r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{systemUserDeatil:function(){var e=s()(o.a.mark(function e(r){var t,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.t)(r);case 2:0==(t=e.sent).code&&(a=t.data,this.form={userName:a.userName,loginName:a.loginName,remark:a.remark,roleIds:[]},n=[],a.roles.forEach(function(e){n.push(e.roleId)}),this.form.roleIds=n);case 4:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),agaminInput:function(){this.form={version:"",type:"2",downloadUrl:"",isForce:!1,description:""}},onSubmit:function(){var e,r=this;this.$refs.form.validate((e=s()(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}if(a=null,r.userId){e.next=12;break}return e.next=5,Object(i.e)(r.form.loginName);case 5:if(0!=e.sent.code){e.next=10;break}return e.next=9,Object(i.q)(r.form);case 9:a=e.sent;case 10:e.next=16;break;case 12:return r.form.userId=r.userId,e.next=15,Object(i.u)(r.form);case 15:a=e.sent;case 16:0==a.code&&(r.$message({message:"操作成功",type:"success"}),r.$router.go(-1)),console.log(res),e.next=22;break;case 20:return console.log("error submit!!"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,r)})),function(r){return e.apply(this,arguments)})),console.log("submit!"),console.log(this.form)},obtainUserDetail:function(){var e=s()(o.a.mark(function e(r){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,userDetailApi(r);case 2:0==(t=e.sent).code&&(t.data.createdTime=l.formatDate(t.data.createdTime,!0),this.userinfo=t.data);case 4:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()}},c={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"form",attrs:{"label-width":"120px",rules:e.rules,model:e.form}},[t("el-form-item",{attrs:{label:"用户昵称",prop:"userName"}},[t("el-input",{model:{value:e.form.userName,callback:function(r){e.$set(e.form,"userName",r)},expression:"form.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"账号",prop:"loginName"}},[t("el-input",{model:{value:e.form.loginName,callback:function(r){e.$set(e.form,"loginName",r)},expression:"form.loginName"}})],1),e._v(" "),e.userId?e._e():t("el-form-item",{attrs:{label:"账号密码",prop:"password"}},[t("el-input",{model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"管理员权限",prop:"roleId"}},[t("el-checkbox-group",{model:{value:e.form.roleIds,callback:function(r){e.$set(e.form,"roleIds",r)},expression:"form.roleIds"}},e._l(e.rolelist,function(r,a){return t("el-checkbox",{key:a,attrs:{label:r.roleId}},[e._v(e._s(r.roleName))])}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(r){e.$set(e.form,"remark",r)},expression:"form.remark"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),t("el-button",{on:{click:e.agaminInput}},[e._v("取消")])],1)},staticRenderFns:[]};var m=t("VU/8")(u,c,!1,function(e){t("eYug")},null,null);r.default=m.exports},eYug:function(e,r){}});